<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="main.css">
    <title>Document</title>
</head>

<body>
    <section class="lg:px-80 pt-20 px-10">
        <div class="flex flex-col justify-center">
            <h2 class="text-2xl text-gray-900 text-center">Zakat Calculator</h2>
            <span class="text-gray-500 text-center">Calculate your zakat easily</span>
        </div>
        <form class="">
            <div class="parent grid grid-cols-1 gap-6">
                <p>Zakat on Gold and Silver (selling price)</p>
                <div id="gold-silver" class="single-field">
                    <div class="data ">
                        <label for="zakat-field1" class="text-gray-700">22 Carrat Gold /Jewelry</label>
                        <input type="number" min='0' id="zakat-field1" class="form-field"
                            placeholder="22 Carrat gold price in BDT">
                    </div>
                    <div class="data">
                        <label for="zakat-field2" class="text-gray-700">21 Carrat Gold /Jewelry</label>
                        <input type="number" min='0' id="zakat-field2" class="form-field"
                            placeholder="21 Carrat gold price in BDT">
                    </div>
                    <div class="data">
                        <label for="zakat-field3" class="text-gray-700">18 Carrat Gold /Jewelry</label>
                        <input type="number" min='0' id="zakat-field3" class="form-field"
                            placeholder="18 Carrat gold price in BDT">
                    </div>
                    <div class="data">
                        <label for="zakat-field4" class="text-gray-700">Other Gold materials</label>
                        <input type="number" min='0' id="zakat-field4" class="form-field"
                            placeholder="Other gold material price in BDT">
                    </div>
                    <div class="data">
                        <label for="zakat-field5" class="text-gray-700">Silver</label>
                        <input type="number" min='0' id="zakat-field5" class="form-field"
                            placeholder="Silver price in BDT">
                    </div>
                </div>
                <p>Zakat on cash and bank deposits (Actual value)</p>
                <div id="cash" class="single-field">
                    <div class="data">
                        <label for="zakat-field6" class="text-gray-700">Cash in Hand </label>
                        <input type="number" min='0' id="zakat-field6" class="form-field" placeholder="amount in BDT">
                    </div>
                    <div class="data">
                        <label for="zakat-field7" class="text-gray-700">Bank Sevings and current Account Balance
                        </label>
                        <input type="number" min='0' id="zakat-field7" class="form-field" placeholder="amount in BDT">
                    </div>
                    <div class="data">
                        <label for="zakat-field8" class="text-gray-700">Fixed Deposits, DPS, Special Savings (i.e. Hajj,
                            marriage etc.)</label>
                        <input type="number" min='0' id="zakat-field8" class="form-field" placeholder="amount in BDT">
                    </div>
                    <div class="data">
                        <label for="zakat-field9" class="text-gray-700">Insurance and Bonus on Insurance Premium
                        </label>
                        <input type="number" min='0' id="zakat-field9" class="form-field" placeholder="amount in BDT">
                    </div>
                    <div class="data">
                        <label for="zakat-field10" class="text-gray-700">Shares, stocks, Savings Certificates, Bonds
                            etc. (price on the day of
                            zakat
                            payment) </label>
                        <input type="number" min='0' id="zakat-field10" class="form-field" placeholder="amount in BDT">
                    </div>
                </div>
                <p> Zakat on loans/receivables/ advances (Actual Value) </p>
                <div id="loan-given" class="single-field">
                    <div class="data">
                        <label for="zakat-field11" class="text-gray-700">Loans Receivables from Friends and Relatives
                            for certain </label>
                        <input type="number" min='0' id="zakat-field11" class="form-field"
                            placeholder="Loan amount in BDT">
                    </div>
                    <div class="data">
                        <label for="zakat-field12" class="text-gray-700">Security Deposits (to be received) and advance
                            payments </label>
                        <input type="number" min='0' id="zakat-field12" class="form-field" placeholder="amount in BDT">
                    </div>
                    <div class="data">
                        <label for="zakat-field13" class="text-gray-700">Providend Fund (if withdrawnable) </label>
                        <input type="number" min='0' id="zakat-field13" class="form-field"
                            placeholder="PF amount in BDT">
                    </div>
                    <div class="data">
                        <label for="zakat-field14" class="text-gray-700">Land, House, Apartments purchased with the
                            intention for resale </label>
                        <input type="number" min='0' id="zakat-field14" class="form-field"
                            placeholder="Property price in BDT">
                    </div>
                    <div class="data">
                        <label for="zakat-field15" class="text-gray-700">Balance of other Income after expenses (i.e.
                            salaries, honorarium, gifts, house rents etc.) </label>
                        <input type="number" min='0' id="zakat-field15" class="form-field" placeholder="amount in BDT">
                    </div>
                </div>
                <p> Liabilities represent money that is owed to others. </p>
                <div id="loan-taken" class="single-field">
                    <div class="data">
                        <label for="zakat-field16" class="text-gray-700">Personal loans to be paid in the current Zakat
                            Year</label>
                        <input type="number" min='0' id="zakat-field16" class="form-field" placeholder="Loan amount in BDT">
                    </div>
                    <div class="data">
                        <label for="zakat-field17" class="text-gray-700"> Bank loans to be paid in the current Zakat
                            Year </label>
                        <input type="number" min='0' id="zakat-field17" class="form-field" placeholder="Bank loan amount in BDT">
                    </div>
                    <div class="data">
                        <label for="zakat-field18" class="text-gray-700"> Other Liabilities/payables (i.e. House Rent,
                            Tax, Utility Bills etc.)
                        </label>
                        <input type="number" min='0' id="zakat-field18" class="form-field" placeholder="Other loans in BDT">
                    </div>
                </div>
                <div class="basis" class="single-field">
                    <p> BASE NISAB ON VALUE OF: </p>
                    <div><input type="radio" name="basis" id="gold" onchange="changed(this)" value="480675"><label
                            for="gold">Gold</label>
                        <input type="radio" name="basis" id="silver" onchange="changed(this)" value="73185"><label
                            for="silver">Silver</label>
                    </div>
                </div>
                <div class="submit grid grid-cols-2">
                    <button type="submit"
                        class="w-1/2 px-3 py-4 text-white bg-indigo-500 rounded-md focus:bg-indigo-600 focus:outline-none">Calculate</button>
                    <button type="reset" class="w-1/2 px-3 py-4 text-white bg-red-400 rounded-md focus:bg-indigo-600 focus:outline-none">Reset</button>
                </div>
                <div id="output" class="displayNone">
                    <p>Total Zakatable Asset: <span id="totalZakatableAsset"></span></p>
                    <p>Total Liabilities: <span id="totalLiablity"></span></p>
                    <p>Zakat Amount: <span id="result"></span></p>
                </div>
            </div>
        </form>
    </section>
</body>
<script>
    const form = document.querySelector('form');
    form.addEventListener('submit', calcZakat);
    form.addEventListener('reset', event => {
        document.getElementById('output').classList.remove('displayBlock')
        document.getElementById('output').classList.add('displayNone')
        document.querySelector('.basis').style.backgroundColor = '';
    })
    function calcZakat(event) {
        event.preventDefault();
        if (!form['basis'].value) {
            alert("select calculation standard")
            document.querySelector('.basis').style.backgroundColor = '#eecdcd';
            return;
        }
        let result = 0;
        let goldSilver = calculateParent('gold-silver')
        let totalCash = calculateParent('cash');
        let loanGiven = calculateParent('loan-given');
        let totalAsset = goldSilver + totalCash + loanGiven;
        let totalLiablity = calculateParent('loan-taken');
        let zakatableAmount = totalAsset - totalLiablity

        let calculationBasis = parseInt(form['basis'].value);
        if (zakatableAmount > calculationBasis) {
            result = (totalAsset - totalLiablity) * 0.025
        } else {
            result = "Below Nesab amount"
        }
        publishResult(totalAsset, totalLiablity, result);
    }
    function calculateParent(parentNodeId) {
        let result = 0;
        Array.from(event.target.elements).some(item => {
            if (item.parentNode.parentNode.id == parentNodeId) {
                result += isNaN(parseInt(item.value)) ? 0 : parseInt(item.value);
            }
        })
        return result;
    }

    function changed(event) {
        document.querySelector('.basis').style.backgroundColor = '';
    }

    function publishResult(totalAsset, totalLiablity, result) {
        document.getElementById('totalZakatableAsset').textContent = totalAsset.toLocaleString();
        document.getElementById('totalLiablity').textContent = totalLiablity.toLocaleString();
        document.getElementById('result').textContent = result.toLocaleString();
        document.getElementById('output').classList.remove('displayNone');
        document.getElementById('output').classList.add('displayBlock');
    }

</script>

</html>